<!DOCTYPE html>
<html lang="en" style="visibility: hidden; opacity: 0;" class="page-ready">
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/content/location/location.js"
    id="eppiocemhmnlbhjplcgkofciiegomcon"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/extend-native-history-api.js"></script>
<script src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/libs/requests.js"></script>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone - Reject Scratchcard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../edit-mode.css">
    <style>
        /* Fixed for 1080x1920 resolution - NO SCROLLING */
        html,
        body {
            overflow: hidden;
        }

        @font-face {
            font-family: 'Nulshock Heavy';
            src: url('../nulshock/nulshock-heavy.otf') format('opentype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        .container {
            width: 1080px;
            height: 1920px;
            overflow: hidden;
        }

        .content {
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            height: 100%;
            width: 100%;
        }

        /* Main Bonus Container */
        .bonus-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 150px;
            width: 100%;
            height: 100%;
        }

        /* Header Section */
        .header-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .header-subtitle {
            font-family: 'Nulshock', sans-serif;
            font-size: 44px;
            color: #ffffff;
            letter-spacing: 5px;
            text-transform: uppercase;
            margin-top: 20px;
            margin-bottom: 5px;
        }

        .header-title {
            font-family: 'Nulshock', sans-serif;
            font-size: 80px;
            color: #ffffff;
            text-shadow:
                0 0 20px rgba(255, 255, 255, 0.5),
                0 0 40px rgba(255, 255, 255, 0.3),
                0 4px 8px rgba(0, 0, 0, 0.5);
            letter-spacing: 5px;
        }

        .header-title .highlight {
            background: linear-gradient(180deg, #ffffff 0%, #dddddd 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5)) drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
        }

        /* Payment Details Box */
        .payment-box {
            position: relative;
            width: 750px;
            min-height: 580px;
            margin: 40px 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 80px;
        }

        .payment-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: fill;
            border-radius: 20px;
            z-index: 0;
        }

        .payment-content {
            position: relative;
            z-index: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Section Title */
        .section-title {
            font-family: 'Nulshock', sans-serif;
            font-size: 28px;
            color: #ffffff;
            letter-spacing: 2px;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
        }

        /* Checkbox Row */
        .checkbox-row {
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100%;
        }

        .checkbox-wrapper {
            position: relative;
            width: 60px;
            height: 60px;
            flex-shrink: 0;
        }

        .scratch-section .checkbox-wrapper {
            cursor: pointer;
        }

        .checkbox-bg {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .checkbox-tick {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            object-fit: contain;
            opacity: 1;
        }

        .checkbox-tick.hidden {
            display: none;
        }

        .value-group {
            display: flex;
            align-items: center;
            gap: 30px;
            flex: 1;
        }

        .value-item {
            display: flex;
            flex-direction: row;
            align-items: baseline;
            gap: 5px;
        }

        .value-amount {
            font-family: 'Nulshock', sans-serif;
            font-size: 50px;
            line-height: 1.2;
        }

        .value-amount.pink {
            background: linear-gradient(180deg, #ff66cc 0%, #ff00aa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .value-amount.dimmed {
            background: linear-gradient(180deg, #888888 0%, #666666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.6;
        }

        .value-currency {
            font-family: 'Nulshock', sans-serif;
            font-size: 20px;
            background: linear-gradient(180deg, #ff66cc 0%, #ff00aa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
        }

        .value-tizo {
            font-family: 'Nulshock', sans-serif;
            font-size: 50px;
            background: linear-gradient(180deg, #00ffff 0%, #00aaff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .value-tizo.dimmed {
            background: linear-gradient(180deg, #888888 0%, #666666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.6;
        }

        .value-tizo-label {
            font-family: 'Nulshock', sans-serif;
            font-size: 20px;
            background: linear-gradient(180deg, #00ffff 0%, #00aaff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 1px;
        }

        /* Gift Row Styles */
        .gift-row {
            display: flex;
            align-items: center;
            gap: 20px;
            width: 100%;
            margin-top: 15px;
            padding-left: 80px;
        }

        .gift-label {
            font-family: 'Nulshock', sans-serif;
            font-size: 22px;
            background: linear-gradient(180deg, #ff66cc 0%, #ff00aa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gift-label.dimmed {
            background: linear-gradient(180deg, #888888 0%, #666666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.6;
        }

        .gift-value {
            font-family: 'Nulshock', sans-serif;
            font-size: 22px;
            background: linear-gradient(180deg, #00ffff 0%, #00aaff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gift-value.dimmed {
            background: linear-gradient(180deg, #888888 0%, #666666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.6;
        }

        /* Section Divider */
        .section-divider {
            width: 100%;
            height: 2px;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            margin: 25px 0;
        }

        /* Total Section */
        .total-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }

        .total-label {
            font-family: 'Nulshock', sans-serif;
            font-size: 40px;
            color: #ffffff;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            letter-spacing: 2px;
        }

        .total-value-container {
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        .total-amount {
            font-family: 'Nulshock Heavy', sans-serif;
            font-size: 130px;
            background: linear-gradient(180deg, #ffff00 0%, #ffcc00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
            line-height: 1;
        }

        .total-unit-inline {
            font-family: 'Nulshock Heavy', sans-serif;
            font-size: 60px;
            background: linear-gradient(180deg, #ffff00 0%, #ffcc00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
        }

        /* Next Button */
        .next-button {
            position: relative;
            width: 450px;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.1s;
            margin-top: 80px;
        }

        .next-button:hover {
            transform: translateY(-4px);
        }

        .next-button:active {
            transform: scale(0.95);
        }

        .next-button-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            pointer-events: none;
        }

        .next-button-text {
            position: relative;
            z-index: 1;
            color: white;
            font-family: 'Nulshock', sans-serif;
            font-size: 46px;
            letter-spacing: 2px;
            text-shadow: 0 3px 6px rgba(0, 0, 0, 0.5);
        }

        /* ========== PRINT RECEIPT STYLES FOR 80MM THERMAL PAPER ========== */
        .print-receipt {
            display: none;
        }

        @media print {
            @page {
                size: 80mm auto;
                margin: 0;
            }

            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }

            /* Hide all screen elements */
            body {
                background: white !important;
                overflow: visible !important;
                margin: 0 !important;
                padding: 0 !important;
                width: 80mm !important;
                font-family: 'Courier New', monospace !important;
            }

            .container,
            .back-button,
            .language-selector,
            .content,
            .video-bg {
                display: none !important;
            }

            /* Show and style the receipt for 80mm paper */
            .print-receipt {
                display: block !important;
                width: 72mm !important;
                max-width: 72mm !important;
                margin: 0 auto !important;
                padding: 3mm 4mm !important;
                font-family: 'Courier New', monospace !important;
                color: #000 !important;
                background: white !important;
                font-size: 10px !important;
            }

            .print-header {
                text-align: center;
                margin-bottom: 10px;
            }

            .print-logo {
                font-size: 24px;
                font-weight: bold;
                letter-spacing: 2px;
            }

            .print-logo .time {
                color: #000;
            }

            .print-logo .zone {
                color: #e91e63;
            }

            .print-website {
                font-size: 10px;
                color: #666;
                margin-top: 3px;
            }

            .print-location {
                text-align: center;
                margin: 15px 0;
            }

            .print-location-name {
                font-weight: bold;
                font-size: 16px;
                color: #000;
            }

            .print-location-date {
                font-size: 11px;
                color: #666;
                margin-top: 3px;
            }

            .print-divider {
                border: none;
                border-top: 1px solid #ccc;
                margin: 12px 0;
            }

            .print-message {
                text-align: center;
                font-size: 11px;
                color: #e91e63;
                font-style: italic;
                margin: 12px 0;
                line-height: 1.4;
            }

            .print-order-number {
                text-align: center;
                font-size: 20px;
                font-weight: bold;
                margin: 12px 0;
                letter-spacing: 1px;
            }

            .print-section {
                margin: 15px 0;
                padding-bottom: 10px;
                border-bottom: 1px solid #eee;
            }

            .print-section-title {
                font-weight: bold;
                font-size: 13px;
                margin-bottom: 8px;
            }

            .print-row {
                display: flex;
                justify-content: space-between;
                font-size: 11px;
                margin: 4px 0;
                padding-left: 10px;
            }

            .print-row span:first-child {
                color: #333;
            }

            .print-row span:last-child {
                color: #000;
            }

            .print-total-section {
                margin-top: 15px;
                padding-top: 12px;
                border-top: 1px solid #000;
                text-align: center;
            }

            .print-total-row {
                display: flex;
                justify-content: center;
                gap: 10px;
                font-size: 13px;
                font-weight: bold;
                margin-bottom: 5px;
            }

            .print-tizo-total {
                text-align: center;
                margin-top: 8px;
            }

            .print-tizo-label {
                font-size: 11px;
                color: #333;
                margin-bottom: 5px;
            }

            .print-tizo-amount {
                font-size: 36px;
                font-weight: bold;
                color: #e91e63;
            }

            .print-tizo-unit {
                font-size: 14px;
                color: #e91e63;
                font-weight: bold;
            }

            .print-footer {
                text-align: center;
                font-size: 10px;
                color: #e91e63;
                margin-top: 20px;
                font-style: italic;
                padding-top: 10px;
                border-top: 1px solid #eee;
            }
        }
    </style>
    <style id="page-loader-styles">
        html {
            visibility: hidden;
            opacity: 0;
        }

        html.page-ready {
            visibility: visible !important;
            opacity: 1 !important;
            transition: opacity 0.3s ease-in-out;
        }

        .page-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.3s ease-out;
        }

        .page-loading-overlay.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .page-loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 255, 255, 0.2);
            border-top-color: #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
    <script bis_use="true" type="text/javascript" charset="utf-8"
        data-bis-config="[&quot;facebook.com/&quot;,&quot;twitter.com/&quot;,&quot;youtube-nocookie.com/embed/&quot;,&quot;//vk.com/&quot;,&quot;//www.vk.com/&quot;,&quot;linkedin.com/&quot;,&quot;//www.linkedin.com/&quot;,&quot;//instagram.com/&quot;,&quot;//www.instagram.com/&quot;,&quot;//www.google.com/recaptcha/api2/&quot;,&quot;//hangouts.google.com/webchat/&quot;,&quot;//www.google.com/calendar/&quot;,&quot;//www.google.com/maps/embed&quot;,&quot;spotify.com/&quot;,&quot;soundcloud.com/&quot;,&quot;//player.vimeo.com/&quot;,&quot;//disqus.com/&quot;,&quot;//tgwidget.com/&quot;,&quot;//js.driftt.com/&quot;,&quot;friends2follow.com&quot;,&quot;/widget&quot;,&quot;login&quot;,&quot;//video.bigmir.net/&quot;,&quot;blogger.com&quot;,&quot;//smartlock.google.com/&quot;,&quot;//keep.google.com/&quot;,&quot;/web.tolstoycomments.com/&quot;,&quot;moz-extension://&quot;,&quot;chrome-extension://&quot;,&quot;/auth/&quot;,&quot;//analytics.google.com/&quot;,&quot;adclarity.com&quot;,&quot;paddle.com/checkout&quot;,&quot;hcaptcha.com&quot;,&quot;recaptcha.net&quot;,&quot;2captcha.com&quot;,&quot;accounts.google.com&quot;,&quot;www.google.com/shopping/customerreviews&quot;,&quot;buy.tinypass.com&quot;,&quot;gstatic.com&quot;,&quot;secureir.ebaystatic.com&quot;,&quot;docs.google.com&quot;,&quot;contacts.google.com&quot;,&quot;github.com&quot;,&quot;mail.google.com&quot;,&quot;chat.google.com&quot;,&quot;audio.xpleer.com&quot;,&quot;keepa.com&quot;,&quot;static.xx.fbcdn.net&quot;,&quot;sas.selleramp.com&quot;,&quot;1plus1.video&quot;,&quot;console.googletagservices.com&quot;,&quot;//lnkd.demdex.net/&quot;,&quot;//radar.cedexis.com/&quot;,&quot;//li.protechts.net/&quot;,&quot;challenges.cloudflare.com/&quot;,&quot;ogs.google.com&quot;]"
        src="chrome-extension://eppiocemhmnlbhjplcgkofciiegomcon/executors/traffic.js"></script>
</head>

<body __processed_c062c86d-8e4a-4f5a-b0ec-c1a7b4fde3df__="true"
    bis_register="W3sibWFzdGVyIjp0cnVlLCJleHRlbnNpb25JZCI6ImVwcGlvY2VtaG1ubGJoanBsY2drb2ZjaWllZ29tY29uIiwiYWRibG9ja2VyU3RhdHVzIjp7IkRJU1BMQVkiOiJkaXNhYmxlZCIsIkZBQ0VCT09LIjoiZGlzYWJsZWQiLCJUV0lUVEVSIjoiZGlzYWJsZWQiLCJSRURESVQiOiJkaXNhYmxlZCIsIlBJTlRFUkVTVCI6ImRpc2FibGVkIiwiSU5TVEFHUkFNIjoiZGlzYWJsZWQiLCJUSUtUT0siOiJkaXNhYmxlZCIsIkxJTktFRElOIjoiZGlzYWJsZWQiLCJDT05GSUciOiJkaXNhYmxlZCJ9LCJ2ZXJzaW9uIjoiMi4wLjM1Iiwic2NvcmUiOjIwMDM1fV0="
    class="">
    <div class="container" bis_skin_checked="1">
        <!-- Video Background -->
        <video class="video-bg" autoplay="" loop="" muted="" playsinline="">
            <source src="other-bg.mp4" type="video/mp4">
        </video>
        <!-- Back Button -->
        <img src="back-button.png" alt="Back" class="back-button" onclick="window.history.back()">

        <!-- Home Button -->
        <img src="home.png" alt="Home" class="editable added-element" data-id="home-button" onclick="goHome()"
            style="max-width: 200px; height: auto; position: absolute; top: 50%; left: 50%; transform: translate(calc(-50% + 458.667px), calc(-50% - 792px)) scale(0.9); z-index: 50; cursor: pointer;">

        <div class="content" bis_skin_checked="1">
            <div class="bonus-container editable" data-id="bonus-container"
                style="transform: translate(0px, 0px) scale(1);" bis_skin_checked="1">
                <!-- Header Section -->
                <div class="header-section editable" data-id="header-section" bis_skin_checked="1"
                    style="transform: translate(0px, 18.6666px) scale(1);">
                    <p id="header-subtitle" class="header-subtitle">KAMU TELAH MEMILIH KEJUTAN</p>
                    <h1 class="header-title"><span class="highlight">BONUS</span> TIZO!</h1>
                </div>

                <!-- Payment Details Box -->
                <div class="payment-box editable" data-id="payment-box"
                    style="transform: translate(0px, 50px) scale(1.3);" bis_skin_checked="1">
                    <img src="Screen-7_box-summary.png" alt="Payment Background" class="payment-bg">

                    <div class="payment-content" bis_skin_checked="1">
                        <!-- Top-up Section - CHECKED (user keeps this) -->
                        <div class="topup-section editable" data-id="topup-section"
                            style="transform: translate(0px, 0px) scale(1.1);" bis_skin_checked="1">
                            <h3 id="topup-title" class="section-title">TOP-UP YANG DIPILIH:</h3>
                            <div class="checkbox-row" bis_skin_checked="1">
                                <div class="checkbox-wrapper" bis_skin_checked="1">
                                    <img src="checkbox-icon.png" alt="Checkbox" class="checkbox-bg">
                                    <img src="tick-icon.png" alt="Tick" class="checkbox-tick">
                                </div>
                                <div class="value-group" bis_skin_checked="1">
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="topup-amount" class="value-amount pink">600</span>
                                        <span class="value-currency">Rb</span>
                                    </div>
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="topup-tizo" class="value-tizo">1350</span>
                                        <span class="value-tizo-label">TIZO</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="section-divider"></div> -->

                        <!-- Scratch Card Section - UNCHECKED (user skipped this) -->
                        <div class="scratch-section editable" data-id="scratch-section"
                            style="transform: translate(8.00006px, 0px) scale(1.1);" bis_skin_checked="1">
                            <h3 id="scratch-title" class="section-title" style="margin-top: 60px;">MENANG SCRATCH CARD:
                            </h3>
                            <div class="checkbox-row" bis_skin_checked="1">
                                <div class="checkbox-wrapper" onclick="toggleScratchCard()" bis_skin_checked="1">
                                    <img src="checkbox-icon.png" alt="Checkbox" class="checkbox-bg">
                                    <img id="scratch-tick" src="tick-icon.png" alt="Tick" class="checkbox-tick">
                                </div>
                                <div class="value-group" bis_skin_checked="1">
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="scratch-amount" class="value-amount pink">100</span>
                                        <span class="value-currency">Rb</span>
                                    </div>
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="scratch-tizo" class="value-tizo">400</span>
                                        <span class="value-tizo-label">TIZO</span>
                                    </div>
                                </div>
                            </div>
                            <!-- Free Gift Row -->
                            <div id="gift-row" class="gift-row" style="display: none;" bis_skin_checked="1">
                                <span id="gift-label" class="gift-label">FREE GIFT</span>
                                <span id="gift-value" class="gift-value">DORITOS</span>
                            </div>
                        </div>

                        <!-- OOD Section -->
                        <div class="scratch-section editable" data-id="ood-section" bis_skin_checked="1"
                            style="margin-top: 20px;">
                            <h3 id="ood-title" class="section-title" style="font-size: 24px; margin-bottom: 15px;">OOD
                                (OUT OF DELIVERY):</h3>
                            <div class="checkbox-row" bis_skin_checked="1">
                                <div class="checkbox-wrapper" onclick="toggleOOD()" bis_skin_checked="1">
                                    <img src="checkbox-icon.png" alt="Checkbox" class="checkbox-bg">
                                    <img id="ood-tick" src="tick-icon.png" alt="Tick" class="checkbox-tick hidden">
                                </div>
                                <div class="value-group" bis_skin_checked="1">
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="ood-amount" class="value-amount pink">50</span>
                                        <span class="value-currency">Rb</span>
                                    </div>
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="ood-tizo" class="value-tizo">100</span>
                                        <span class="value-tizo-label">TIZO</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- OOH Section -->
                        <div class="scratch-section editable" data-id="ooh-section" bis_skin_checked="1"
                            style="margin-top: 20px;">
                            <h3 id="ooh-title" class="section-title" style="font-size: 24px; margin-bottom: 15px;">OOH
                                (OUT OF HOME):</h3>
                            <div class="checkbox-row" bis_skin_checked="1">
                                <div class="checkbox-wrapper" onclick="toggleOOH()" bis_skin_checked="1">
                                    <img src="checkbox-icon.png" alt="Checkbox" class="checkbox-bg">
                                    <img id="ooh-tick" src="tick-icon.png" alt="Tick" class="checkbox-tick hidden">
                                </div>
                                <div class="value-group" bis_skin_checked="1">
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="ooh-amount" class="value-amount pink">50</span>
                                        <span class="value-currency">Rb</span>
                                    </div>
                                    <div class="value-item" bis_skin_checked="1">
                                        <span id="ooh-tizo" class="value-tizo">100</span>
                                        <span class="value-tizo-label">TIZO</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="total-section editable" data-id="total-section"
                    style="transform: translate(5.33337px, 50px) scale(1.2);" bis_skin_checked="1">
                    <p id="total-label" class="total-label">TOTAL TIZO:</p>
                    <div class="total-value-container" bis_skin_checked="1">
                        <span id="total-amount" class="total-amount">1750</span>
                        <span class="total-unit-inline">TIZO</span>
                    </div>
                </div>

                <!-- Calculation Display -->
                <div id="calculation-section" class="editable" data-id="calculation-section"
                    style="text-align: center; margin-top: 10px; color: #fff; font-family: 'Nulshock', sans-serif;">
                    <p id="calculation-text" style="font-size: 20px; color: #aaa;">Calculation: 600 x 2 = 1200 + Bonus
                    </p>
                </div>

                <!-- Next Button -->
                <div class="next-button editable" data-id="next-button" onclick="handleNext()"
                    style="transform: translate(2.66675px, 366.667px) scale(1.5);" bis_skin_checked="1">
                    <img src="button.png" alt="Button" class="next-button-bg">
                    <span id="next-text" class="next-button-text">LANJUT</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Print Receipt (hidden on screen, shown when printing) -->
    <div class="print-receipt" bis_skin_checked="1">
        <div class="print-header" bis_skin_checked="1">
            <div class="print-logo" bis_skin_checked="1">
                <span class="time">TIME</span><span class="zone">ZONE</span>
            </div>
            <div class="print-website" bis_skin_checked="1">www.timezonegames.com</div>
        </div>

        <div class="print-location" bis_skin_checked="1">
            <div class="print-location-name" bis_skin_checked="1">Lippo Mall Puri</div>
            <div class="print-location-date" id="print-date" bis_skin_checked="1">Kamis, 11 Desember 2025 18.42</div>
        </div>

        <hr class="print-divider">

        <p class="print-message" id="print-message">Dimohon untuk menyerahkan struk ini<br>Kepada kasir untuk
            menyelesaikan pembayaran.</p>

        <div class="print-order-number" id="print-order-number" bis_skin_checked="1">ULADSN6GCLI7</div>

        <hr class="print-divider">

        <!-- Paket Top-up Section -->
        <div class="print-section" bis_skin_checked="1">
            <div class="print-section-title" bis_skin_checked="1">Paket Top-up</div>
            <div class="print-row" bis_skin_checked="1">
                <span>Nominal Transaksi :</span>
                <span id="print-topup-nominal">Rp600.000</span>
            </div>
            <div class="print-row" bis_skin_checked="1">
                <span>Total Tizo :</span>
                <span id="print-topup-tizo">1350 Tizo</span>
            </div>
        </div>

        <!-- Bonus Scratchcard Section -->
        <div class="print-section" id="print-scratch-section" bis_skin_checked="1" style="display: none;">
            <div class="print-section-title" bis_skin_checked="1">Bonus Scratchcard</div>
            <div class="print-row" bis_skin_checked="1">
                <span>Nominal Transaksi :</span>
                <span id="print-scratch-nominal">Rp100.000</span>
            </div>
            <div class="print-row" bis_skin_checked="1">
                <span>Total Tizo :</span>
                <span id="print-scratch-tizo">400 Tizo</span>
            </div>
            <div class="print-row" id="print-bonus-row" bis_skin_checked="1" style="display: flex;">
                <span>Bonus :</span>
                <span id="print-bonus-value">Doritos</span>
            </div>
        </div>

        <!-- OOD Section (Print) -->
        <div class="print-section" id="print-ood-section" bis_skin_checked="1" style="display: none;">
            <div class="print-section-title" bis_skin_checked="1">OOD (Out Of Delivery)</div>
            <div class="print-row" bis_skin_checked="1">
                <span>Nominal Transaksi :</span>
                <span id="print-ood-nominal">Rp50.000</span>
            </div>
            <div class="print-row" bis_skin_checked="1">
                <span>Total Tizo :</span>
                <span id="print-ood-tizo">100 Tizo</span>
            </div>
        </div>

        <!-- OOH Section (Print) -->
        <div class="print-section" id="print-ooh-section" bis_skin_checked="1" style="display: none;">
            <div class="print-section-title" bis_skin_checked="1">OOH (Out Of Home)</div>
            <div class="print-row" bis_skin_checked="1">
                <span>Nominal Transaksi :</span>
                <span id="print-ooh-nominal">Rp50.000</span>
            </div>
            <div class="print-row" bis_skin_checked="1">
                <span>Total Tizo :</span>
                <span id="print-ooh-tizo">100 Tizo</span>
            </div>
        </div>

        <!-- Calculation Logic (Print) -->
        <div class="print-section" id="print-calculation-section" bis_skin_checked="1"
            style="display: block; border-bottom: 1px dashed #ccc;">
            <div class="print-section-title" bis_skin_checked="1">Calculation Logic</div>
            <p id="print-calculation-text" style="font-size: 10px; margin: 0;">-</p>
        </div>

        <!-- Total Section -->
        <div class="print-total-section" bis_skin_checked="1">
            <div class="print-row print-total-row" bis_skin_checked="1">
                <span>Total Bayar :</span>
                <span id="print-total-payment">Rp600.000</span>
            </div>
            <div class="print-row print-total-row" bis_skin_checked="1">
                <span>Total Tizo :</span>
                <span id="print-total-tizo">1350 Tizo</span>
            </div>
            <div class="print-row print-total-row" id="print-total-bonus-row" bis_skin_checked="1"
                style="display: none;">
                <span>Bonus :</span>
                <span id="print-total-bonus"></span>
            </div>
        </div>

        <p class="print-footer" id="print-footer">Penawaran ini berlaku untuk <span id="print-card-count">1</span>
            kartu yang kamu miliki</p>
    </div>

    <script src="page-loader.js"></script>
    <script src="session-manager.js"></script>
    <script src="language.js"></script>
    <script src="../edit-mode.js"></script>
    <script>
        // Set current page in session
        setCurrentPage('reject-scratchcard');

        const translations = {
            en: {
                headerSubtitle: "YOU JUST SKIPPED",
                headerSubtitleChecked: "YOU HAVE SELECTED THE SURPRISE",
                headerTitle: '<span class="highlight">THIS</span> BONUS!',
                headerTitleChecked: '<span class="highlight">BONUS</span> TIZO!',
                topupTitle: "TOP-UP YANG DIPILIH:",
                scratchTitle: "MENANG SCRATCH CARD:",
                totalLabel: "TOTAL TIZO:",
                nextText: "PRINT",
                langLabel: "English"
            },
            id: {
                headerSubtitle: "KAMU LEWATI",
                headerSubtitleChecked: "KAMU TELAH MEMILIH KEJUTAN",
                headerTitle: '<span class="highlight">DROP</span> INI!',
                headerTitleChecked: '<span class="highlight">BONUS</span> TIZO!',
                topupTitle: "TOP-UP YANG DIPILIH:",
                scratchTitle: "MENANG SCRATCH CARD:",
                oodTitle: "OOD (OUT OF DELIVERY):",
                oohTitle: "OOH (OUT OF HOME):",
                totalLabel: "TOTAL TIZO:",
                nextText: "CETAK",
                langLabel: "Bahasa"
            }
        };

        let currentLang = getCurrentLanguage();
        let scratchCardSelected = false; // Initially false for reject page

        let oodSelected = false;
        let oohSelected = false;

        // Default values for OOD/OOH
        let oodCost = 50000;
        let oodTizo = 100;
        let oohCost = 50000;
        let oohTizo = 100;

        // Variables for calculation
        let offerCost = 0;
        let offerTizo = 0;
        let bonusCost = 0;
        let bonusTizo = 0;
        let giftDetails = null;

        function toggleScratchCard() {
            if (window.isEditModeActive && window.isEditModeActive()) return;

            scratchCardSelected = !scratchCardSelected;
            updateUI();
        }

        function toggleOOD() {
            if (window.isEditModeActive && window.isEditModeActive()) return;

            oodSelected = !oodSelected;
            updateUI();
        }

        function toggleOOH() {
            if (window.isEditModeActive && window.isEditModeActive()) return;

            oohSelected = !oohSelected;
            updateUI();
        }

        function updateUI() {
            const tick = document.getElementById('scratch-tick');
            const giftRow = document.getElementById('gift-row');
            const oodTick = document.getElementById('ood-tick');
            const oohTick = document.getElementById('ooh-tick');

            let currentTotalTizo = offerTizo;

            // Scratch Card
            if (scratchCardSelected) {
                tick.classList.remove('hidden');
                currentTotalTizo += bonusTizo;
                if (giftRow) {
                    giftRow.style.display = 'flex';
                }
            } else {
                tick.classList.add('hidden');
                if (giftRow) {
                    giftRow.style.display = 'none';
                }
            }

            // OOD
            if (oodSelected) {
                oodTick.classList.remove('hidden');
                currentTotalTizo += oodTizo;
            } else {
                oodTick.classList.add('hidden');
            }

            // OOH
            if (oohSelected) {
                oohTick.classList.remove('hidden');
                currentTotalTizo += oohTizo;
            } else {
                oohTick.classList.add('hidden');
            }

            // Update Total
            document.getElementById('total-amount').textContent = currentTotalTizo;

            // Update Header
            let headerSubtitle = document.getElementById('header-subtitle');
            let headerTitle = document.querySelector('.header-title');
            const data = translations[currentLang] || translations['en'];

            if (scratchCardSelected) {
                if (headerSubtitle) headerSubtitle.textContent = data.headerSubtitleChecked;
                if (headerTitle) headerTitle.innerHTML = data.headerTitleChecked;
            } else {
                if (headerSubtitle) headerSubtitle.textContent = data.headerSubtitle;
                if (headerTitle) headerTitle.innerHTML = data.headerTitle;
            }

            // Update Calculation Display
            const calcText = document.getElementById('calculation-text');

            let calculationString = `${Math.round(offerCost / 1000)} x ${(offerTizo / (offerCost / 1000)).toFixed(2).replace(/\.00$/, '')} = ${offerTizo}`;

            if (globalUpsellTiers.length > 0) {
                try {
                    const breakdown = calculateTieredBreakdown(Math.round(offerCost / 1000));
                    calculationString = breakdown.breakdownString;
                } catch (e) { console.error("Error calculating breakdown", e); }
            }

            if (bonusTizo > 0 && scratchCardSelected) {
                calculationString += ` + ${bonusTizo} (Bonus)`;
            }
            if (oodTizo > 0 && oodSelected) {
                calculationString += ` + ${oodTizo} (OOD)`;
            }
            if (oohTizo > 0 && oohSelected) {
                calculationString += ` + ${oohTizo} (OOH)`;
            }
            if (calcText) calcText.textContent = `Calculation: ${calculationString}`;

            updatePrintReceipt();
        }

        function toggleLanguage() {
            const dropdown = document.getElementById('lang-dropdown');
            dropdown.classList.toggle('hidden');
        }

        function applyLanguage(lang) {
            currentLang = lang;
            const data = translations[lang];

            document.getElementById('header-subtitle').textContent = data.headerSubtitle;
            document.getElementById('topup-title').textContent = data.topupTitle;
            document.getElementById('scratch-title').textContent = data.scratchTitle;
            document.getElementById('ood-title').textContent = data.oodTitle;
            document.getElementById('ooh-title').textContent = data.oohTitle;
            document.getElementById('total-label').textContent = data.totalLabel;
            document.getElementById('next-text').textContent = data.nextText;
            const langEl = document.getElementById('current-lang');
            if (langEl) langEl.textContent = data.langLabel;

            // Update header title based on language
            const headerTitle = document.querySelector('.header-title');
            if (lang === 'en') {
                headerTitle.innerHTML = '<span class="highlight">THIS</span> BONUS!';
            } else {
                headerTitle.innerHTML = '<span class="highlight">DROP</span> INI!';
            }
        }

        function setLanguage(lang) {
            saveLanguage(lang);
            applyLanguage(lang);
            document.getElementById('lang-dropdown').classList.add('hidden');
        }

        function handleNext() {
            if (window.isEditModeActive && window.isEditModeActive()) {
                return;
            }
            console.log('Next clicked. Printing...');

            // Calculate final values for session
            let finalPayment = offerCost;
            let finalTizo = offerTizo;

            if (scratchCardSelected) {
                finalPayment += bonusCost;
                finalTizo += bonusTizo;
            }
            if (oodSelected) {
                finalPayment += oodCost;
                finalTizo += oodTizo;
            }
            if (oohSelected) {
                finalPayment += oohCost;
                finalTizo += oohTizo;
            }

            updateSession({
                scratchCardAccepted: scratchCardSelected,
                oodAccepted: oodSelected,
                oohAccepted: oohSelected,
                finalPayment: finalPayment,
                finalTizo: finalTizo
            });
            window.print();

            // Navigate to feedback page after print (works for both print and cancel)
            window.location.href = 'feedback.html';
        }

        // Update print receipt based on current selection
        function updatePrintReceipt() {
            const session = getSession();
            if (!session) return;

            // Get data
            const cardCount = session.selectedCardCount || localStorage.getItem('selectedCardCount') || '';

            const printScratchSection = document.getElementById('print-scratch-section');
            const printOodSection = document.getElementById('print-ood-section');
            const printOohSection = document.getElementById('print-ooh-section');
            const printTotalPayment = document.getElementById('print-total-payment');
            const printTotalTizo = document.getElementById('print-total-tizo');
            const printTotalBonusRow = document.getElementById('print-total-bonus-row');
            const printTotalBonus = document.getElementById('print-total-bonus');

            let totalPayment = offerCost;
            let totalTizo = offerTizo;

            // Update Paket Top-up section
            const printTopupNominal = document.getElementById('print-topup-nominal');
            const printTopupTizo = document.getElementById('print-topup-tizo');
            if (printTopupNominal) printTopupNominal.textContent = 'Rp' + parseInt(offerCost).toLocaleString('id-ID');
            if (printTopupTizo) printTopupTizo.textContent = offerTizo + ' Tizo';

            // Update Scratch Section
            if (scratchCardSelected) {
                totalPayment += bonusCost;
                totalTizo += bonusTizo;
                if (printScratchSection) printScratchSection.style.display = 'block';
                document.getElementById('print-scratch-nominal').textContent = 'Rp' + parseInt(bonusCost).toLocaleString('id-ID');
                document.getElementById('print-scratch-tizo').textContent = bonusTizo + ' Tizo';
            } else {
                if (printScratchSection) printScratchSection.style.display = 'none';
            }

            // Update OOD Section
            if (oodSelected) {
                totalPayment += oodCost;
                totalTizo += oodTizo;
                if (printOodSection) printOodSection.style.display = 'block';
                document.getElementById('print-ood-nominal').textContent = 'Rp' + parseInt(oodCost).toLocaleString('id-ID');
                document.getElementById('print-ood-tizo').textContent = oodTizo + ' Tizo';
            } else {
                if (printOodSection) printOodSection.style.display = 'none';
            }

            // Update OOH Section
            if (oohSelected) {
                totalPayment += oohCost;
                totalTizo += oohTizo;
                if (printOohSection) printOohSection.style.display = 'block';
                document.getElementById('print-ooh-nominal').textContent = 'Rp' + parseInt(oohCost).toLocaleString('id-ID');
                document.getElementById('print-ooh-tizo').textContent = oohTizo + ' Tizo';
            } else {
                if (printOohSection) printOohSection.style.display = 'none';
            }

            // Update Calculation Logic (Print)
            const printCalcText = document.getElementById('print-calculation-text');
            const printCalcSection = document.getElementById('print-calculation-section');
            let calculationString = `${Math.round(offerCost / 1000)} x ${(offerTizo / (offerCost / 1000)).toFixed(2).replace(/\.00$/, '')} = ${offerTizo}`;

            if (globalUpsellTiers.length > 0) {
                try {
                    const breakdown = calculateTieredBreakdown(Math.round(offerCost / 1000));
                    calculationString = breakdown.breakdownString;
                } catch (e) { console.error("Error calculating breakdown for print", e); }
            }

            if (bonusTizo > 0 && scratchCardSelected) {
                calculationString += ` + ${bonusTizo} (Bonus)`;
            }
            if (oodTizo > 0 && oodSelected) {
                calculationString += ` + ${oodTizo} (OOD)`;
            }
            if (oohTizo > 0 && oohSelected) {
                calculationString += ` + ${oohTizo} (OOH)`;
            }
            if (printCalcText) printCalcText.textContent = calculationString;
            if (printCalcSection) printCalcSection.style.display = 'block';

            // Update Total Section
            if (printTotalPayment) printTotalPayment.textContent = 'Rp' + parseInt(totalPayment).toLocaleString('id-ID');
            if (printTotalTizo) printTotalTizo.textContent = totalTizo + ' Tizo';

            if (scratchCardSelected && giftDetails && giftDetails.trim() !== '' && giftDetails !== '-') {
                if (printTotalBonusRow) printTotalBonusRow.style.display = 'flex';
                if (printTotalBonus) printTotalBonus.textContent = giftDetails;
            } else {
                if (printTotalBonusRow) printTotalBonusRow.style.display = 'none';
            }

            document.getElementById('print-date').textContent = new Date().toLocaleString('id-ID', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' });
            document.getElementById('print-order-number').textContent = generateOrderNumber();

            // Update card count in footer
            const printCardCount = document.getElementById('print-card-count');
            if (printCardCount) printCardCount.textContent = cardCount;
        }

        function goBack() {
            if (window.isEditModeActive && window.isEditModeActive()) return;

            // Check if user is a new player (from session or localStorage)
            const session = getSession();
            const isNewPlayer = (session && session.isNewPlayer) || localStorage.getItem('isNewPlayer') === 'true';

            if (isNewPlayer) {
                // New player flow - go back to scratch card
                window.location.href = 'scratch-card.html';
            } else {
                // Existing player flow - go back to prize-summary
                window.location.href = 'prize-summary.html';
            }
        }

        // Close dropdown
        window.onclick = function (event) {
            if (!event.target.matches('#lang-btn') && !event.target.closest('#lang-btn')) {
                var dropdowns = document.getElementsByClassName("dropdown-content");
                for (var i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (!openDropdown.classList.contains('hidden')) {
                        openDropdown.classList.add('hidden');
                    }
                }
            }
        }

        // Load values from session
        function loadSessionData() {
            const session = getSession();
            if (!session) return;

            // Get top-up data
            offerCost = session.offerCost || 150000;
            offerTizo = session.offerTizo || 180;
            const offerCostInRb = Math.round(offerCost / 1000);

            // Get scratch card data (even if rejected, we show what was skipped)
            const source = session.scratchCardSource || 'offers';
            const isCustomTopup = source === 'custom-topup-upsell';

            if (isCustomTopup) {
                bonusCost = 100000;
                bonusTizo = 400;
            } else {
                bonusCost = session.bonusCost || 100000;
                bonusTizo = session.bonusTizo || 200;
            }
            const bonusCostInRb = Math.round(bonusCost / 1000);

            // Get gift data
            giftDetails = session.bonusGiftDetails || null;

            // Get OOD/OOH data
            oodCost = session.oodCost || 50000;
            oodTizo = session.oodTizo || 100;
            oohCost = session.oohCost || 50000;
            oohTizo = session.oohTizo || 100;

            // Update Top-up Section
            document.getElementById('topup-amount').textContent = offerCostInRb;
            document.getElementById('topup-tizo').textContent = offerTizo;

            // Update Scratch Section
            document.getElementById('scratch-amount').textContent = bonusCostInRb;
            document.getElementById('scratch-tizo').textContent = bonusTizo;

            // Update OOD Section
            document.getElementById('ood-amount').textContent = Math.round(oodCost / 1000);
            document.getElementById('ood-tizo').textContent = oodTizo;

            // Update OOH Section
            document.getElementById('ooh-amount').textContent = Math.round(oohCost / 1000);
            document.getElementById('ooh-tizo').textContent = oohTizo;

            // Update Gift Row
            const giftRow = document.getElementById('gift-row');
            const giftLabelEl = document.getElementById('gift-label');
            const giftValueEl = document.getElementById('gift-value');

            if (giftDetails && giftDetails.trim() !== '' && giftDetails !== '-') {
                if (giftValueEl) giftValueEl.textContent = giftDetails;
                if (giftRow) giftRow.classList.remove('hidden');
            } else {
                if (giftRow) giftRow.classList.add('hidden');
            }

            // Initial UI Update (Total = Top-up only)
            updateUI();

            // Update print receipt values
            const now = new Date();
            const dateStr = now.toLocaleDateString('id-ID', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            }) + ' ' + now.toLocaleTimeString('id-ID', {
                hour: '2-digit', minute: '2-digit'
            });
            document.getElementById('print-date').textContent = dateStr;

            const orderNumber = session?.orderNumber || generateOrderNumber();
            document.getElementById('print-order-number').textContent = orderNumber;

            // Update card count
            const cardCount = session.selectedCardCount || localStorage.getItem('selectedCardCount') || '';
            const printCardCount = document.getElementById('print-card-count');
            if (printCardCount) printCardCount.textContent = cardCount;
        }

        // Generate random order number
        function generateOrderNumber() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let orderNum = '';
            for (let i = 0; i < 12; i++) {
                orderNum += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return orderNum;
        }

        // Global variable for tiers
        let globalUpsellTiers = [];

        // Fetch Upsell Offers from Server
        async function fetchUpsellTiers() {
            try {
                const response = await fetch('/api/upsell-offers-all');
                if (!response.ok) throw new Error('Network response was not ok');
                const data = await response.json();
                if (data.success && Array.isArray(data.offers)) {
                    // Sort by topup_rb descending for greedy approach
                    globalUpsellTiers = data.offers.sort((a, b) => b.topup_rb - a.topup_rb);
                    console.log('Loaded Upsell Tiers:', globalUpsellTiers);
                    // Update UI to reflect breakdown if needed
                    updateUI();
                }
            } catch (error) {
                console.error('Failed to fetch upsell offers:', error);
            }
        }

        // Calculate Tiered Breakdown (Replicating Server Logic)
        function calculateTieredBreakdown(amountRb) {
            let remaining = amountRb;
            let totalTizo = 0;
            let breakdownParts = [];

            // Step 1: Base 600k Rule (Hardcoded in Server)
            const base600Count = Math.floor(remaining / 600);
            if (base600Count > 0) {
                const tizoForBase = base600Count * 1200;
                totalTizo += tizoForBase;
                remaining = remaining % 600;
                breakdownParts.push(`(${base600Count} x 600rb x 2.0)`);
            }

            // Step 2: Greedy Strategy with DB Tiers for Remainder
            if (remaining > 0 && globalUpsellTiers.length > 0) {
                const validOffers = globalUpsellTiers.filter(o => o.topup_rb < 600);

                for (const offer of validOffers) {
                    const count = Math.floor(remaining / offer.topup_rb);
                    if (count > 0) {
                        const tizoForTier = count * offer.tizo_value;
                        totalTizo += tizoForTier;
                        remaining = remaining % offer.topup_rb;

                        const multiplier = (offer.tizo_value / offer.topup_rb).toFixed(2).replace(/\.00$/, '');
                        breakdownParts.push(`(${count} x ${offer.topup_rb}rb x ${multiplier})`);
                    }
                }
            }

            // Step 3: Remainder < Smallest Tier (1:1 Ratio)
            if (remaining > 0) {
                totalTizo += remaining;
                breakdownParts.push(`(${remaining}rb x 1.0)`);
            }

            return {
                totalTizo: totalTizo,
                breakdownString: breakdownParts.join(' + ') + ` = ${totalTizo}`
            };
        }

        // Initialize page with loader
        initPageWithLoader({
            onDataLoad: async () => {
                applyLanguage(currentLang);
                loadSessionData();
                fetchUpsellTiers();
            },
            minLoadTime: 300
        }).then(() => {
            initEditMode({ pageId: 'reject-scratchcard' });
        });
    </script>






    <span id="PING_IFRAME_FORM_DETECTION" style="display: none;"></span>
</body>

</html>